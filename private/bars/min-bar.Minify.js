(function(a){Remote.scripts("ace-builds/src-noconflict/ace.js","jquery.upload/min-index_0.0.2.js",function(){Remote.template("jquery.bar/templates/Minify.template.html",function(b){$("body").append(b);$.get(a.json,function(b){1<parseInt($.fn.jquery)?a.toolbar.toolbox=b:a.toolbar.toolbox=JSON.parse(b);a.toolbar.toolbox.App=a;$("#header").bar(a.toolbar);$("#file-upload").uploader(a.uploader);$("#file-upload form").css("display","inline");$("#file-upload form input").css({color:"rgba(55,55,55,0.9)","text-shadow":"0 0 3px rgb(255,255,255)"}).attr("accept","application/x-javascript");$("#code-output").hide().attr("readonly","readonly");window.editor=ace.edit("code-input");editor.getSession().setMode("ace/mode/javascript");editor.setValue("//JavaScript\n");editor.clearSelection();editor.moveCursorTo(1,0);editor.focus();$("#download-file, #minify-view").hide();$("#uglify-view").click()})})});window.console&&console.info&&console.info(a.name,a.version.join("."))})({name:"Minify",version:[0,3,0],json:Remote.href("jquery.bar/js/bar.Minify.json"),panelToggle:function(a){a?($("#closer-compiler").fadeIn(),$("#minify-icon").css("opacity",".9")):($("#closer-compiler").fadeOut(),$("#minify-icon").css("opacity",".4"))},toolbar:{items:[{el:"img",css:{"vertical-align":"middle",cursor:"pointer",margin:"0 5px"},attr:{src:Remote.href("/graphics/icons/Icons/Icons/Document2.png"),title:"JShrink UI",id:"minify-icon"},click:function(){$("#closer-compiler").is(":visible")?location.hash="#Home":location.hash="#Minify";return!1}}],callback:function(a){a.$bar.find('a[href="#Minify/upload"]').click(function(a){$("#file-upload").find("input").first().click();return!1});Frontgate.router.on("#Minify/upload",function(a){$("#file-upload").find("input").first().click();location.hash="Minify"});Frontgate.router.on("#Minify/download",function(a){$("#download-file").attr("href")&&(window.location.href=$("#download-file").attr("href"));location.hash="Minify"});Frontgate.router.on("#Minify/javascript",function(a){$("#uglify-view").parent().siblings().find("a[data-toggle='code']").removeClass("selected");$("#uglify-view").addClass("selected");if($("#code-input").is(":visible"))return!1;$("#code-output").hide();$("#code-input").show();editor.moveCursorTo(0,0);location.hash="Minify"});Frontgate.router.on("#Minify/minified",function(a){$("#minify-view").parent().siblings().find("a[data-toggle='code']").removeClass("selected");$("#minify-view").addClass("selected");if($("#code-input").is(":visible"))$("#code-input").hide(),$("#code-output").show();else return!1;location.hash="Minify"});Frontgate.router.on("#Minify/compile",function(a){$.ajax({url:Situs.href("/closure_compiler/compile"),type:"POST",data:editor.getValue(),success:function(a){2>parseInt($.fn.jquery)&&(a=JSON.parse(a));editor.setValue(a.input);$("#code-output").val(a.output);$("#minify-view").show();location.hash="Minify/minified";$("#download-file").show();a=Situs.hrefAuth("/download/min-"+a.file);document.getElementById("download-file").setAttribute("href",a)}});location.hash="Minify"});Frontgate.router.on("#Minify/clear",function(a){editor.setValue("");$("#code-output").val("");$("#download-file, #minify-view").hide();$("#uglify-view").click();editor.setValue("//JavaScript\n");location.hash="Minify"});Bar.app("Minify").navigator.subscribeEvent("click",function(a){Frontgate.Apps("Minify").panelToggle("#Minify"==a.res.input)});$("#closer-compiler").css({top:$("#header").outerHeight(),background:"rgba(0,0,0,.5)"});$("#closer-compiler textarea").css({width:$("#header .toolbar").outerWidth(),opacity:1,"box-shadow":"0 0 7px rgba(0,0,0,.5)"});$("#minify-icon").parent().css({"float":"right","line-height":"32px",opacity:0.9,margin:"0 5px"})}},uploader:{validate:function(a){var b=function(a,c,d){if(a=a||""){switch(c){case "alert":case "error":case "warnning":case "info":break;default:"number"==typeof c?(d=c,c="info"):"undefined"==typeof c&&(d=0,c="info")}d&&setTimeout(function(){b()},d);$("#closer-compiler-myUI").attr("title",a).addClass(c)}else $("#closer-compiler-myUI").attr({title:"Closer Compiler UI","class":"toolbar-item"})};return a.name.match(/.js$/)||"application/x-javascript"==a.type?1E3<a.size/1024?b("file is too big ("+Math.round(a.size/1024,1)+" KB)","error",1E4):!0:b("wrong file type ( "+(a.type||"?")+" )","error",1E4)},url:Situs.href("/closure_compiler"),success:function(a){2>parseInt($.fn.jquery)&&(a=JSON.parse(a));editor.setValue(a.input);$("#code-output").val(a.output);location.hash="Minify/minified";$("#minify-view").show().click();$("#download-file").show();$("#file-upload form input").val("");a=Situs.hrefAuth("/download/min-"+a.file);document.getElementById("download-file").setAttribute("href",a)}}});
