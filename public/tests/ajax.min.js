function postMessage(a,b,c){b=b||"log.php";var d=new XMLHttpRequest;d.open("POST",b);d.setRequestHeader("Content-Type","text/plain;charset=UTF-8");d.send(a)}function getTextSync(a){var b=new XMLHttpRequest;b.open("GET",a,false);b.send(null);if(b.status!==200)throw new Error(b.statusText);var c=b.getResponseHeader("Content-Type");if(!c.match(/^text/))throw new Error("Expected textual response; got: "+c);return b.responseText}function getText(a,b){var c=new XMLHttpRequest;c.open("GET",a);c.onreadystatechange=function(){if(c.readyState===4&&c.status===200){var a=c.getResponseHeader("Content-Type");if(a.match(/^text/))b(c.responseText)}};c.send(null)}function get(a,b){var c=new XMLHttpRequest;c.open("GET",a);c.onreadystatechange=function(){if(c.readyState===4&&c.status===200){var a=c.getResponseHeader("Content-Type");if(a.indexOf("xml")!==-1&&c.responseXML)b(c.responseXML);else if(a==="application/json")b(JSON.parse(c.responseText));else b(c.responseText)}};c.send(null)}function encodeFormData(a){if(!a)return"";var b=[];for(var c in a){if(!a.hasOwnProperty(c))continue;if(typeof a[c]==="function")continue;var d=a[c].toString();c=encodeURIComponent(c.replace(" ","+"));d=encodeURIComponent(d.replace(" ","+"));b.push(c+"="+d)}return b.join("&")}function postData(a,b,c){var d=new XMLHttpRequest;d.open("POST",a);d.onreadystatechange=function(){if(d.readyState===4&&c)c(d)};d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");d.send(encodeFormData(b))}function getData(a,b,c){var d=new XMLHttpRequest;d.open("GET",a+"?"+encodeFormData(b));d.onreadystatechange=function(){if(d.readyState===4&&c)c(d)};d.send(null)}function postJSON(a,b,c){var d=new XMLHttpRequest;d.open("POST",a);d.onreadystatechange=function(){if(d.readyState===4&&c)c(d)};d.setRequestHeader("Content-Type","application/json");b=[$.base64Encode(JSON.stringify(b))];d.send(JSON.stringify(b))}function timedGetText(a,b,c){var d=new XMLHttpRequest;var e=false;var f=setTimeout(function(){e=true;d.abort()},b);d.open("GET",a);d.onreadystatechange=function(){if(d.readyState!==4)return;if(e)return;clearTimeout(f);if(d.status===200)c(d.responseText)};d.send(null)}
